<div class="container py-4">

  <div class="mb-4">
    <h2 class="mb-0">
      <span class="material-icons align-middle me-2">bookmark</span>
      Salvados
    </h2>
  </div>

  <ul class="nav nav-tabs mb-4">
    <li class="nav-item">
      <button 
        class="nav-link"
        [class.active]="activeTab === 'posts'"
        (click)="switchTab('posts')">
        <span class="material-icons align-middle me-1">feed</span>
        Posts ({{ savedPosts.length }})
      </button>
    </li>
    <li class="nav-item">
      <button 
        class="nav-link"
        [class.active]="activeTab === 'eventos'"
        (click)="switchTab('eventos')">
        <span class="material-icons align-middle me-1">event</span>
        Eventos ({{ savedEventos.length }})
      </button>
    </li>
  </ul>

  <div class="text-center py-5" *ngIf="loading">
    <div class="spinner-border text-primary" role="status">
      <span class="visually-hidden">Carregando...</span>
    </div>
  </div>

  <div *ngIf="activeTab === 'posts' && !loading">
    <div class="row row-cols-1 row-cols-md-2 g-4">
      <div class="col" *ngFor="let post of savedPosts">
        <div class="card h-100">
          <div class="card-body">
            <div class="d-flex justify-content-between align-items-start mb-2">
              <span class="badge bg-primary">{{ getPostTypeLabel(post.type) }}</span>
              <button 
                class="btn btn-sm btn-link text-danger p-0"
                (click)="unsavePost(post)"
                title="Remover dos salvos">
                <span class="material-icons">bookmark_remove</span>
              </button>
            </div>

            <h5 class="card-title">{{ (post.content | slice:0:50) }}...</h5>
            <p class="card-text text-truncate-3">{{ post.content }}</p>

            <div class="d-flex align-items-center mt-3">
              <div class="avatar-small me-2">
                <img 
                  *ngIf="post.authorPhotoUrl" 
                  [src]="post.authorPhotoUrl" 
                  [alt]="post.authorName"
                  class="rounded-circle"
                  width="24"
                  height="24">
                <span *ngIf="!post.authorPhotoUrl" class="material-icons" style="font-size: 18px;">person</span>
              </div>
              <small class="text-muted">
                {{ post.authorName || 'Usu√°rio' }} ‚Ä¢ {{ formatDate(post.createdAt) }}
              </small>
            </div>

            <div class="d-flex gap-3 mt-3 pt-3 border-top">
              <span class="text-muted small">
                üôè {{ post.likesCount || 0 }}
              </span>
              <span class="text-muted small">
                <span class="material-icons align-middle" style="font-size: 16px;">comment</span>
                {{ post.comments?.length || 0 }}
              </span>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="text-center py-5" *ngIf="savedPosts.length === 0">
      <span class="material-icons text-muted" style="font-size: 64px;">bookmark_border</span>
      <p class="text-muted mt-3">Voc√™ n√£o possui posts salvos</p>
    </div>
  </div>

  <div *ngIf="activeTab === 'eventos' && !loading">
    <div class="row row-cols-1 row-cols-md-2 g-4">
      <div class="col" *ngFor="let evento of savedEventos">
        <div class="card h-100">
          <div class="card-body">
            <div class="d-flex justify-content-between align-items-start mb-2">
              <span class="badge bg-success">Evento</span>
              <button 
                class="btn btn-sm btn-link text-danger p-0"
                (click)="unsaveEvento(evento)"
                title="Remover dos salvos">
                <span class="material-icons">bookmark_remove</span>
              </button>
            </div>

            <h5 class="card-title">{{ evento.title }}</h5>
            <p class="card-text text-truncate-3">{{ evento.description }}</p>

            <div class="mt-3">
              <div class="d-flex align-items-center mb-2">
                <span class="material-icons text-primary me-2" style="font-size: 20px;">event</span>
                <small>{{ formatDate(evento.eventDate) }}</small>
              </div>
              <div class="d-flex align-items-center" *ngIf="evento.location">
                <span class="material-icons text-primary me-2" style="font-size: 20px;">place</span>
                <small>{{ evento.location }}</small>
              </div>
            </div>

            <div class="mt-3 pt-3 border-top">
              <small class="text-muted">
                <span class="material-icons align-middle" style="font-size: 16px;">person</span>
                {{ evento.createdByName || 'Organizador' }}
              </small>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="text-center py-5" *ngIf="savedEventos.length === 0">
      <span class="material-icons text-muted" style="font-size: 64px;">bookmark_border</span>
      <p class="text-muted mt-3">Voc√™ n√£o possui eventos salvos</p>
    </div>
  </div>
</div>
