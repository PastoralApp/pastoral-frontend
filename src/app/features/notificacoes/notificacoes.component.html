<div class="notificacoes-container">
  <div class="header">
    <h1>
      <span class="material-icons">notifications</span>
      Notificações
    </h1>
    <button class="filter-btn" (click)="toggleFilter()" [class.active]="showOnlyUnread">
      <span class="material-icons">filter_list</span>
      {{ showOnlyUnread ? 'Mostrar Todas' : 'Apenas Não Lidas' }}
    </button>
  </div>

  <div class="badge-counter" *ngIf="naoLidas.length > 0">
    {{ naoLidas.length }} não {{ naoLidas.length === 1 ? 'lida' : 'lidas' }}
  </div>

  <div class="loading" *ngIf="loading">
    <span class="material-icons spinning">refresh</span>
    Carregando...
  </div>

  <div class="notificacoes-list" *ngIf="!loading && filteredNotificacoes.length > 0">
    <div 
      *ngFor="let notificacao of filteredNotificacoes" 
      class="notificacao-card"
      [class.lida]="notificacao.lida"
      [class.geral]="notificacao.isGeral"
      (click)="marcarComoLida(notificacao)"
    >
      <div class="notificacao-icon">
        <span class="material-icons">
          {{ notificacao.isGeral ? 'campaign' : 'group' }}
        </span>
      </div>

      <div class="notificacao-content">
        <div class="notificacao-header">
          <h3>{{ notificacao.titulo }}</h3>
          <span class="badge" *ngIf="notificacao.isGeral">Geral</span>
          <span class="badge grupo" *ngIf="!notificacao.isGeral">{{ notificacao.grupoSigla }}</span>
        </div>

        <p>{{ notificacao.mensagem }}</p>

        <div class="notificacao-footer">
          <span class="remetente">
            <span class="material-icons">person</span>
            {{ notificacao.remetenteNome }}
          </span>
          <span class="data">{{ formatDate(notificacao.dataEnvio) }}</span>
        </div>
      </div>

      <div class="status-indicator" *ngIf="!notificacao.lida">
        <span class="material-icons">circle</span>
      </div>
    </div>
  </div>

  <div class="empty-state" *ngIf="!loading && filteredNotificacoes.length === 0">
    <span class="material-icons">notifications_none</span>
    <p>{{ showOnlyUnread ? 'Nenhuma notificação não lida' : 'Nenhuma notificação' }}</p>
  </div>
</div>
