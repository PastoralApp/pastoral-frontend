<nav class="sidebar" [class.open]="isOpen">

  <div class="sidebar-overlay" *ngIf="isOpen" (click)="close()"></div>

  <div class="sidebar-content">

    <div class="sidebar-header">
      <div class="d-flex align-items-center">
        <span class="material-icons text-white me-2">church</span>
        <span class="fw-bold text-white">PastoralApp</span>
      </div>
      <button class="btn btn-link text-white p-0" (click)="close()">
        <span class="material-icons">close</span>
      </button>
    </div>

    <div class="user-section" *ngIf="currentUser">
      <div class="d-flex align-items-center p-3">
        <div class="user-avatar me-3">
          <span class="material-icons">person</span>
        </div>
        <div>
          <div class="fw-semibold text-white">{{ currentUser.name }}</div>
          <small class="text-white-50">{{ currentUser.email }}</small>
        </div>
      </div>
    </div>

    <ul class="nav flex-column">
      <li *ngFor="let item of menuItems" class="nav-item">
        <a *ngIf="canAccessRoute(item.roles)" 
           [routerLink]="item.path" 
           routerLinkActive="active"
           class="nav-link"
           (click)="close()">
          <span class="material-icons me-2">{{ item.icon }}</span>
          {{ item.label }}
        </a>
      </li>

      <li class="nav-item" *ngIf="canAccessRoute([3])">
        <hr class="border-white-50 my-2">
        <a routerLink="/admin" routerLinkActive="active" class="nav-link" (click)="close()">
          <span class="material-icons me-2">admin_panel_settings</span>
          Administração
        </a>
      </li>

      <li class="nav-item" *ngIf="canAccessRoute([2, 3])">
        <a routerLink="/coordenacao" routerLinkActive="active" class="nav-link" (click)="close()">
          <span class="material-icons me-2">groups</span>
          Coordenação
        </a>
      </li>
    </ul>

    <div class="sidebar-footer mt-auto">
      <a routerLink="/profile" class="nav-link" (click)="close()">
        <span class="material-icons me-2">settings</span>
        Meu Perfil
      </a>
      <button class="nav-link btn btn-link text-start w-100" (click)="logout()">
        <span class="material-icons me-2">logout</span>
        Sair
      </button>
    </div>
  </div>
</nav>
